runtime: nodejs20
entrypoint: npm start
instance_class: F1
service: piano
automatic_scaling:
  target_cpu_utilization: 0.65
  min_instances: 0
  max_instances: 2

env_variables:
  NODE_ENV: 'production'
  DATABASE_URL: 'postgresql://postgres:SecureP@ssw0rd2025!@/appri_piano?host=/cloudsql/prediction-market-project:us-central1:appri-db-2'
  JWT_SECRET: 'piano-teacher-secret-key-2025'
  USE_MOCK_DB: 'false'
  # SMTP Configuration (SendGrid)
  SMTP_HOST: 'smtp.sendgrid.net'
  SMTP_PORT: '587'
  SMTP_USER: 'apikey'
  SMTP_PASS: 'YOUR_SENDGRID_API_KEY'
  SMTP_SECURE: 'false'
  SMTP_FROM_EMAIL: 'noreply@boomcreator.com'
  FRONTEND_URL: 'https://piano-dot-prediction-market-project.uc.r.appspot.com'

beta_settings:
  cloud_sql_instances: 'prediction-market-project:us-central1:appri-db-2'
